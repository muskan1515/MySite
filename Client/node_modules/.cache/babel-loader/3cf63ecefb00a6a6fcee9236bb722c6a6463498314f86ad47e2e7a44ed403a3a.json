{"ast":null,"code":"'use strict';\n\n/**\n * Module dependencies\n */\nvar url = require('url');\nvar request = require('request');\nvar extend = require('deep-extend');\n\n// Package version\nvar VERSION = require('../package.json').version;\nfunction Buffer(options) {\n  if (!(this instanceof Buffer)) return new Buffer(options);\n  this.VERSION = VERSION;\n\n  // Merge the default options with the client submitted options\n  this.options = extend({\n    access_token: null,\n    rest_base: 'https://api.bufferapp.com/1',\n    request_options: {\n      headers: {\n        'Accept': '*/*',\n        'Connection': 'close',\n        'User-Agent': 'node-buffer/' + VERSION\n      }\n    }\n  }, options);\n\n  // Build a request object\n  this.request = request.defaults(extend(\n  // Pass the client submitted request options\n  this.options.request_options, {}));\n}\nBuffer.prototype.__buildEndpoint = function (path, base) {\n  var endpoint = this.options.rest_base;\n  if (url.parse(path).protocol !== null) {\n    endpoint = path;\n  } else {\n    endpoint += path.charAt(0) === '/' ? path : '/' + path;\n  }\n  // Remove trailing slash\n  endpoint = endpoint.replace(/\\/$/, \"\");\n\n  // Add json extension if not provided in call\n  endpoint += path.split('.').pop() !== 'json' ? '.json' : '';\n  endpoint += this.options.access_token.length ? '?access_token=' + this.options.access_token : '';\n  console.log('endpoint = ' + endpoint + ' path = ' + path);\n  return endpoint;\n};\nBuffer.prototype.__request = function (method, path, params, callback) {\n  var base = 'rest';\n\n  // Set the callback if no params are passed\n  if (typeof params === 'function') {\n    callback = params;\n    params = {};\n  }\n\n  // Set API base\n  if (typeof params.base !== 'undefined') {\n    base = params.base;\n    delete params.base;\n  }\n\n  // Build the options to pass to our custom request object\n  var options = {\n    method: method.toLowerCase(),\n    // Request method - get || post\n    url: this.__buildEndpoint(path, base) // Generate url\n  };\n\n  // Pass url parameters if get\n  if (method === 'get') {\n    options.qs = params;\n  }\n\n  // Pass form data if post\n  if (method === 'post') {\n    var formKey = 'form';\n    options[formKey] = params;\n  }\n  this.request(options, function (error, response, data) {\n    if (error) {\n      callback(error, data, response);\n    } else {\n      try {\n        data = JSON.parse(data);\n      } catch (parseError) {\n        callback(new Error('Status Code: ' + response.statusCode), data, response);\n      }\n      if (typeof data.errors !== 'undefined') {\n        callback(data.errors, data, response);\n      } else if (response.statusCode !== 200) {\n        callback(new Error('Status Code: ' + response.statusCode), data, response);\n      } else {\n        callback(null, data, response);\n      }\n    }\n  });\n};\n\n/**\n * GET\n */\nBuffer.prototype.get = function (url, params, callback) {\n  return this.__request('get', url, params, callback);\n};\n\n/**\n * POST\n */\nBuffer.prototype.post = function (url, params, callback) {\n  return this.__request('post', url, params, callback);\n};\nmodule.exports = Buffer;","map":{"version":3,"names":["url","require","request","extend","VERSION","version","Buffer","options","access_token","rest_base","request_options","headers","defaults","prototype","__buildEndpoint","path","base","endpoint","parse","protocol","charAt","replace","split","pop","length","console","log","__request","method","params","callback","toLowerCase","qs","formKey","error","response","data","JSON","parseError","Error","statusCode","errors","get","post","module","exports"],"sources":["D:/ReactJS/deliveryapp/node_modules/node-buffer/lib/buffer.js"],"sourcesContent":["'use strict';\n\n/**\n * Module dependencies\n */\n\nvar url = require('url');\nvar request = require('request');\nvar extend = require('deep-extend');\n\n// Package version\nvar VERSION = require('../package.json').version;\n\nfunction Buffer (options) {\n  if (!(this instanceof Buffer)) return new Buffer(options);\n\n  this.VERSION = VERSION;\n\n  // Merge the default options with the client submitted options\n  this.options = extend({\n    access_token: null,\n    rest_base: 'https://api.bufferapp.com/1',\n    request_options: {\n      headers: {\n        'Accept': '*/*',\n        'Connection': 'close',\n        'User-Agent': 'node-buffer/' + VERSION\n      }\n    }\n  }, options);\n\n  // Build a request object\n  this.request = request.defaults(\n    extend(\n      // Pass the client submitted request options\n      this.options.request_options,{}\n    )\n  );\n}\n\nBuffer.prototype.__buildEndpoint = function(path, base) {\n  var endpoint = this.options.rest_base;\n\n  if (url.parse(path).protocol !== null) {\n    endpoint = path;\n  }\n  else {\n    endpoint += (path.charAt(0) === '/') ? path : '/' + path;\n  }\n  // Remove trailing slash\n  endpoint = endpoint.replace(/\\/$/, \"\");\n\n  // Add json extension if not provided in call\n  endpoint += (path.split('.').pop() !== 'json') ? '.json' : '';\n\n  endpoint += this.options.access_token.length ? '?access_token='+this.options.access_token : '';\n  console.log('endpoint = ' + endpoint + ' path = '+path);\n  return endpoint;\n};\n\nBuffer.prototype.__request = function(method, path, params, callback) {\n\n  var base = 'rest';\n\n  // Set the callback if no params are passed\n  if (typeof params === 'function') {\n    callback = params;\n    params = {};\n  }\n\n  // Set API base\n  if (typeof params.base !== 'undefined') {\n    base = params.base;\n    delete params.base;\n  }\n\n  // Build the options to pass to our custom request object\n  var options = {\n    method: method.toLowerCase(),  // Request method - get || post\n    url: this.__buildEndpoint(path, base) // Generate url\n  };\n\n  // Pass url parameters if get\n  if (method === 'get') {\n    options.qs = params;\n  }\n\n  // Pass form data if post\n  if (method === 'post') {\n    var formKey = 'form';\n\n    options[formKey] = params;\n  }\n\n  this.request(options, function(error, response, data){\n    if (error) {\n      callback(error, data, response);\n    }\n    else {\n      try {\n        data = JSON.parse(data);\n      }\n      catch(parseError) {\n        callback(\n          new Error('Status Code: ' + response.statusCode),\n          data,\n          response\n        );\n\n      }\n      if (typeof data.errors !== 'undefined') {\n        callback(data.errors, data, response);\n      }\n      else if(response.statusCode !== 200) {\n        callback(\n          new Error('Status Code: ' + response.statusCode),\n          data,\n          response\n        );\n      }\n      else {\n        callback(null, data, response);\n      }\n    }\n  });\n};\n\n/**\n * GET\n */\nBuffer.prototype.get = function(url, params, callback) {\n  return this.__request('get', url, params, callback);\n};\n\n/**\n * POST\n */\nBuffer.prototype.post = function(url, params, callback) {\n  return this.__request('post', url, params, callback);\n};\n\nmodule.exports = Buffer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}